/**
 * Responsive carousel fit for asynchronous data
 * @version v0.0.2 - 2015-09-22
 * @link https://github.com/blakeandrewwood/angular-carousel-lite#readme
 * @author Blake Wood
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";function carouselLite(){var a={restrict:"E",scope:{carouselClass:"@carouselClass",slideClass:"@slideClass"},controller:CarouselLiteController,controllerAs:"vm",bindToController:!0,template:'<div id="carousel" class="{{ vm.carouselClass }}"><div id="carousel-track"></div></div>'};return a}function CarouselLiteController(a,b,c){function d(){e(),f(),h()}function e(){F=$("#carousel"),F.css({position:"relative","background-color":"#fff",cursor:"pointer","overflow-x":"hidden","overflow-y":"hidden"})}function f(){G=$("#carousel-track"),G.css({position:"absolute",top:"0",left:"0",height:"100%","white-space":"nowrap","box-sizing":"border-box"})}function g(){E&&c.cancel(E),E=c(function(){J.numSlides>0&&o(J.position)},250)}function h(){I=Math.floor(window.innerWidth/2),i()}function i(){var a=window.innerWidth,b=(G.outerWidth(),a+200);G.css("padding-left",b+"px"),G.css("padding-right",b+"px")}function j(a){k(a,function(){J.numSlides++,l(a),B(a),1==J.numSlides&&c(function(){J.lastScroll.x=-Number.MAX_NUMBER,J.position=0,o(J.position)},800)})}function k(a,b){var c=new Image;c.src=a,c.callback=b,c.onload=function(){this.callback()}}function l(a){var b="";b+='<div class="carousel-image '+H.slideClass+'">',a&&(b+='<img style="height: 100%;" draggable="false" src="'+a+'">'),b+="</div>",G.append(b);var c=$(".carousel-image:last");c.css({display:"inline-block",position:"relative",top:"0",left:"0",opacity:"0.5",height:"100%","vertical-align":"top","pointer-events":"none","box-sizing":"border-box"})}function m(){J.numSlides>0&&J.position<J.numSlides-1&&(J.lastPosition=J.position,J.position++,o(J.position))}function n(){J.position>0&&(J.lastPosition=J.position,J.position--,o(J.position))}function o(a){var b=t(a);w(b)}function p(a){F.scrollLeft(a)}function q(){var a=[],b=[];$(".carousel-image").each(function(c){var d=$(this),e=x(d),f={index:c,offsetCenter:e};e>0?a.push(f):b.push(f)});var c=r(a,b);J.lastPosition=J.position,J.position=c.index,o(J.position)}function r(a,b){var c={};c.pos=s(a),c.neg=s(b);var d=null;return d=null===c.pos.offsetCenterAbs?c.neg:null===c.neg.offsetCenterAbs?c.pos:c.pos.offsetCenterAbs>c.neg.offsetCenterAbs?c.neg:c.pos}function s(a){var b=null,c={index:null,offsetCenter:null};return angular.forEach(a,function(a,d){var e=Math.abs(a.offsetCenter);(b>e||null===b)&&(b=e,c=a)}),c.offsetCenterAbs=null,null!==c.offsetCenter&&(c.offsetCenterAbs=Math.abs(c.offsetCenter)),c}function t(a){var b=$(".carousel-image").eq(a),c=x(b);return F.scrollLeft()+c}function u(){var a=$(".carousel-image").eq(J.lastPosition);a.css("opacity","0.5");var b=$(".carousel-image").eq(J.position);b.css("opacity","1")}function v(){var a="none";return J.lastPosition<J.position?a="next":J.lastPosition>J.position&&(a="prev"),a}function w(a){z(),F.animate({scrollLeft:a},100,function(){var a=v();A(a)})}function x(a){var b=a.offset().left+a.outerWidth()/2;return b-I}function y(a){var b=a.x;K.scroll.x=F.scrollLeft(),K.distance=K.start.x-b+K.grabbed.x,p(K.distance)}function z(){C()}function A(a){u(),J.lastScroll.x=F.scrollLeft(),D(a)}function B(b){a.$emit("carouselEventImageLoaded",{src:b})}function C(){a.$emit("carouselEventPreScroll",{})}function D(b){a.$emit("carouselEventPostScroll",{position:J.position,direction:b})}var E,F,G,H=this,I=0,J={position:0,lastPosition:0,numSlides:0,lastScroll:{x:0}},K={button:null,grabbed:{x:0},scroll:{x:0},start:{x:0}};d(),$(window).resize(function(){h(),g()}),G.on("contextmenu",function(){return!1}),b.bind(G,{start:function(a){K.grabbed.x=a.x,K.start.x=F.scrollLeft()},move:function(a){y(a)},end:q,cancel:q}),a.$on("carouselAddSingle",function(a,b){j(b.image)}),a.$on("carouselAddMany",function(a,b){angular.forEach(b.images,function(a,b){j(a)})}),a.$on("carouselNext",function(a,b){m()}),a.$on("carouselPrev",function(a,b){n()})}angular.module("angularCarouselLite",["ngTouch"]).directive("carouselLite",carouselLite),CarouselLiteController.$inject=["$rootScope","$swipe","$timeout"];